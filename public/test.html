<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>SellerMockups Test</title>
    <style>
      body{font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;padding:24px;max-width:720px;margin:auto}
      input,select,button{font-size:16px;padding:8px;margin:6px 0;width:100%}
      img{max-width:512px;display:block;margin-top:16px}
      code{background:#f6f8fa;padding:2px 6px;border-radius:4px}
    </style>
  </head>
  <body>
    <h1>Test: /api/generate-one</h1>
    <label>Image URL (your design or test image)</label>
    <input id="imageUrl" value="https://images.unsplash.com/photo-1604147706281-8b05a3d0f7d5?w=1200" />

    <label>Product Type</label>
    <select id="productType">
      <option value="ornament" selected>ornament</option>
      <option value="tshirt">tshirt</option>
      <option value="hoodie">hoodie</option>
      <option value="mug">mug</option>
      <option value="blanket">blanket</option>
    </select>

    <button id="go">Generate</button>

    <p id="status"></p>
    <img id="out" />

    <script>
      document.getElementById('go').onclick = async () => {
        const status = document.getElementById('status');
        const out = document.getElementById('out');
        out.src = "";
        status.textContent = "Generating…";

        const resp = await fetch("/api/generate-one", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({
            imageUrl: document.getElementById('imageUrl').value,
            productType: document.getElementById('productType').value
          })
        });
        const data = await resp.json();
        console.log(data);
        if (data.ok) {
          status.textContent = "Success!";
          out.src = "data:image/png;base64," + data.imageBase64;
        } else {
          status.textContent = "Error: " + (data.error || "unknown");
        }
      };
    </script>
    <p>Tip: If you see <code>Use POST</code>, you’re opening the API URL directly. Use this page instead.</p>
  </body>
</html>
